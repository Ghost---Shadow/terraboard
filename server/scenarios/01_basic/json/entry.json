{
  "provider": {
    "aws": {
      "region": "eu-west-1"
    }
  },
  "locals": {
    "engine": "postgres",
    "engine_version": "9.6.9",
    "instance_class": "db.t2.large",
    "allocated_storage": 5,
    "port": "5432"
  },
  "data": {
    "aws_vpc": {
      "default": {
        "default": true
      }
    },
    "aws_subnet_ids": {
      "all": {
        "vpc_id": "${data.aws_vpc.default.id}"
      }
    },
    "aws_security_group": {
      "default": {
        "vpc_id": "${data.aws_vpc.default.id}",
        "name": "default"
      }
    }
  },
  "module": {
    "master": {
      "source": "../../",
      "identifier": "demodb-master-postgres",
      "engine": "${local.engine}",
      "engine_version": "${local.engine_version}",
      "instance_class": "${local.instance_class}",
      "allocated_storage": "${local.allocated_storage}",
      "name": "demodbpostgres",
      "username": "demouser",
      "password": "YourPwdShouldBeLongAndSecure!",
      "port": "${local.port}",
      "vpc_security_group_ids": [
        "${data.aws_security_group.default.id}"
      ],
      "maintenance_window": "Mon:00:00-Mon:03:00",
      "backup_window": "03:00-06:00",
      "backup_retention_period": 1,
      "subnet_ids": "${data.aws_subnet_ids.all.ids}",
      "create_db_option_group": false,
      "create_db_parameter_group": false
    },
    "replica": {
      "source": "../../",
      "identifier": "demodb-replica-postgres",
      "replicate_source_db": "${module.master.this_db_instance_id}",
      "engine": "${local.engine}",
      "engine_version": "${local.engine_version}",
      "instance_class": "${local.instance_class}",
      "allocated_storage": "${local.allocated_storage}",
      "username": "",
      "password": "",
      "port": "${local.port}",
      "vpc_security_group_ids": [
        "${data.aws_security_group.default.id}"
      ],
      "maintenance_window": "Tue:00:00-Tue:03:00",
      "backup_window": "03:00-06:00",
      "backup_retention_period": 0,
      "create_db_subnet_group": false,
      "create_db_option_group": false,
      "create_db_parameter_group": false
    }
  }
}